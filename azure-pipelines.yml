name: Azure Pipelines
stages:
- stage: Build
  jobs:
  - job: Build
    pool:
      vmImage: 'ubuntu-latest'
    steps:
    - script: 'sudo npm install -g newman'
      displayName: 'Install Newman'
      

    - script: 'ls -la $(System.DefaultWorkingDirectory)/postman'
      displayName: 'List files in working directory'
    # - script: 'sudo newman run $(System.DefaultWorkingDirectory)/automatedtesting/starterapis.json'
    #   displayName: 'Data validation Tests'
    - script: 'sudo newman run $(System.DefaultWorkingDirectory)/postman/DataValidationTestStarterAPIspostman_collection.json -e $(System.DefaultWorkingDirectory)/postman/Test.environment.json'
      displayName: 'Data validation Tests'

    - script: 'sudo newman run $(System.DefaultWorkingDirectory)/postman/RegressionTestStarterAPIspostman_collection.json -e $(System.DefaultWorkingDirectory)/postman/Test.environment.json'
      displayName: 'Regression Tests'
    
    